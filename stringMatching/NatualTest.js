var helper = new StrMatchHelper();  //字符串匹配帮助类
var horspool = new Horspool();      //Horspool算法
var boyerMoore = new BoyerMoore();//改进查找表后的BoyerMoore算法

var natualTexts = [
    "The Philippines  (About this sound listen) Filipino: Pilipinas [ˌpɪlɪˈpinɐs] or Filipinas [ˌfɪlɪˈpinɐs]), officially the Republic of the Philippines (Filipino: Republika ng Pilipinas)[a] is a unitary sovereign and archipelagic country in Southeast Asia. Situated in the western Pacific Ocean, it consists of about 7,641 islands[17] that are categorized broadly under three main geographical divisions from north to south: Luzon, Visayas, and Mindanao. The capital city of the Philippines is Manila and the most populous city is Quezon City, both part of Metro Manila.[18] Bounded by the South China Sea on the west, the Philippine Sea on the east and the Celebes Sea on the southwest, the Philippines shares maritime borders with Taiwan to the north, Vietnam to the west, Palau to the east and Malaysia and Indonesia to the south. The Philippines' location on the Pacific Ring of Fire and close to the equator makes the Philippines prone to earthquakes and typhoons, but also endows it with abundant natural resources and some of the world's greatest biodiversity The Philippines has an area of 343 448 square kilometers (132,606 sq mi)[4] and, as of 2015, had a population of at least 100 million.[6] As of January 2018, it was the eighth-most populated country in Asia and the 12th most populated country in the world. Approximately 10 million additional Filipinos lived overseas,[19] comprising one of the world's largest diasporas. Multiple ethnicities and cultures are found throughout the islands. In prehistoric times. Negritos were some of the archipelago's earliest inhabitants. They were followed by successive waves of Austronesian peoples.[20] Exchanges with Chinese, Malay, Indian, and Islamic nations occurred. Then, various competing maritime states were established under the rule of Datus, Rajahs, Sultans or Lakans.The arrival of Ferdinand Magellan, a Portuguese explorer leading a fleet for the Spanish, in Homonhon, Eastern Samar in 1521 marked the beginning of Hispanic colonization. In 1543, Spanish explorer Ruy López de Villalobos named the archipelago Las Islas Filipinas in honor of Philip II of Spain. With the arrival of Miguel López de Legazpi from Mexico City, in 1565, the first Hispanic settlement in the archipelago was established.[21] The Philippines became part of the Spanish Empire for more than 300 years. This resulted in Catholicism becoming the dominant religion. During this time, Manila became the western hub of the trans-Pacific trade connecting Asia with Acapulco in the Americas using Manila galleons.[22]As the 19th century gave way to the 20th, the Philippine Revolution quickly followed, which then spawned the short-lived First Philippine Republic, followed by the bloody Philippine–American War. Aside from the period of Japanese occupation, the United States retained sovereignty over the islands until after World War II, when the Philippines was recognized as an independent nation. Since then, the Philippines has often had a tumultuous experience with democracy, which included the overthrow of a dictatorship by a non-violent revolution.[24]It is a founding member of the United Nations, World Trade Organization, Association of Southeast Asian Nations, the Asia-Pacific Economic Cooperation forum, and the East Asia Summit. It also hosts the headquarters of the Asian Development Bank.[25] The Philippines is considered to be an emerging market and a newly industrialized country,[26] which has an economy transitioning from being based on agriculture to one based more on services and manufacturing.[27] It is one of the only two predominantly Christian nations in Southeast Asia, the other being East Timor.",
    "The earliest evidence of human life around present-day Manila is the nearby Angono Petroglyphs, dated to around 3000 BC. Negritos, an Australoid people who became the aboriginal inhabitants of the Philippines, lived across the island of Luzon, where Manila is located, before the Malayo-Polynesians migrated in and assimilated them.[21]The polity of Tondo flourished during the latter half of the Ming dynasty as a result of direct trade relations with China. The Tondo district was the traditional capital of the empire, and its rulers were sovereign kings, not mere chieftains. They were addressed variously as panginuan in Maranao or panginoón in Tagalog ('lords'); anák banwa ('son of heaven'); or lakandula ('lord of the palace'). The Emperor of China considered the Lakans—the rulers of ancient Manila—'王', or kings.[22] In the 13th century, Manila consisted of a fortified settlement and trading quarter on the shore of the Pasig River. It was then settled by the Indianized empire of Majapahit, as recorded in the epic eulogy poem 'Nagarakretagama', which described the area's conquest by Maharaja Hayam Wuruk. Selurong , a historical name for Manila, is listed in Canto 14 alongside Sulot, which is now Sulu, and Kalka.[22] During the reign of Sultan Bolkiah from 1485 to 1521, the Sultanate of Brunei invaded, wanting to take advantage of Tondo's trade with China by attacking its environs and establishing the Muslim Rajahnate of Maynilà (كوتا سلودوڠ; Kota Seludong). The rajahnate was ruled under and gave yearly tribute to the Sultanate of Brunei as a satellite state.[23] It established a new dynasty under the local leader, who accepted Islam and became Rajah Salalila or Sulaiman I. He established a trading challenge to the already rich House of Lakan Dula in Tondo. Islam was further strengthened by the arrival of Muslim traders from the Middle East and Southeast Asia.[24] In 1574, Manila was temporarily besieged by the Chinese pirate Lim Hong, who was ultimately thwarted by the local inhabitants. The city then became the seat of the Spanish colonial government.The newly rebuilt Manila Cathedral in 1880 before the earthquake of July 20, 1880, which knocked down the over-a-century old bell tower. On June 24, 1571, the conquistador Miguel López de Legazpi arrived in Manila and declared it a territory of New Spain (Mexico), establishing a city council in what is now the district of 'Intramuros. López de Legazpi had the local royalty executed or exiled after the failure of the Tondo Conspiracy, a plot wherein an alliance between datus, rajahs, Japanese merchants and the Sultanate of Brunei would band together to execute the Spaniards, along with their Latin American recruits and Visayan allies. The victorious Spaniards made Manila, the capital of the Spanish East Indies and of the Philippines, which their empire would control for the next three centuries. Manila became famous during the Manila–Acapulco galleon trade, which lasted for three centuries and brought goods from Europe, Africa and Hispanic America across the Pacific Islands to Southeast Asia (which was already an entrepôt for goods coming from India, Indonesia and China), and vice versa. Silver that was mined in Mexico and Peru was exchanged for Chinese silk, Indian gems and the spices of Southeast Asia. Likewise, wines and olives grown in Europe and North Africa were shipped via Mexico to Manila.[26] The city was captured by Great Britain in 1762 as part of the European Seven Years' War between Spain, France and Great Britain.[27] The city was then occupied by the British for almost two years from 1762 to 1764 and remained the capital of the Philippines. Eventually, the British withdrew in accordance with the 1763 Treaty of Paris. An unknown number of Indian soldiers known as sepoys, who came with the British, deserted and settled in nearby Cainta, Rizal, which explains the uniquely Indian features of generations of Cainta residents.[29][30] The Chinese were then punished for supporting the British invasion, and the fortress city of Intramuros, initially populated by 1200 Spanish families and garrisoned by 400 Spanish troops,[31] kept its cannons pointed at Binondo, the world's oldest Chinatown.[32] The Mexican population was concentrated at the south part of Manila,[33][34] and also at Cavite, where ships from Spain's American colonies docked, and at Ermita, an area so named because of a Mexican hermit that lived there.[35] After Mexico gained independence in 1821, Spain began to govern Manila directly.[36] Under direct Spanish rule, banking, industry and education flourished more than they had in the previous two centuries.[37] The opening of the Suez Canal in 1869 facilitated direct trade and communications with Spain. The city's growing wealth and education attracted indigenous people, Chinese, Indians, Latinos, and Europeans from the surrounding provinces[38] and facilitated the rise of an ilustrado class that espoused liberal ideas: the ideological foundations of the Philippine Revolution, which sought independence from Spain.",
    "In 1948, President Elpidio Quirino moved the seat of government of the Philippines to Quezon City, a new capital in the suburbs and fields northeast of Manila, created in 1939 during the administration of President Manuel L. Quezon.[45] The move ended any implementation of the Burnham Plan's intent for the government centre to be at Luneta.With the Visayan-born Arsenio Lacson as its first elected mayor in 1952 (all mayors were appointed before this), Manila underwent The Golden Age,[46] once again earning its status as the 'Pearl of the Orient', a moniker it earned before the Second World War. After Lacson's term in the 1950s, Manila was led by Antonio Villegas for most of the 1960s. Ramon Bagatsing (an Indian-Filipino) was mayor for nearly the entire 1970s until the 1986 People Power Revolution. Mayors Lacson, Villegas, and Bagatsing are collectively known as the 'Big Three of Manila' for their contribution to the development of the city and their lasting legacy in improving the quality of life and welfare of the people of Manila. During the administration of Ferdinand Marcos, the region of Metro Manila was created as an integrated unit with the enactment of Presidential Decree No. 824 on November 7, 1975. The area encompassed four cities and thirteen adjoining towns, as a separate regional unit of government.[47] On the 405th anniversary of the city's foundation on June 24, 1976, Manila was reinstated by Marcos as the capital of the Philippines for its historical significance as the seat of government since the Spanish Period. Presidential Decree No. 940 states that Manila has always been to the Filipino people and in the eyes of the world, the premier city of the Philippines being the center of trade, commerce, education and culture.[48] During the martial law era, Manila became a hot-bed of resistance activity as youth and student demonstrators repeatedly clashed with the police and military which were subservient to the Marcos regime. After decades of resistance, the non-violent People Power Revolution (predecessor to the peaceful-revolutions that toppled the iron-curtain in Europe), ousted the authoritarian Marcos from power.[49] In 1992, Alfredo Lim was elected mayor, the first Chinese-Filipino to hold the office. He was known for his anti-crime crusades. Lim was succeeded by Lito Atienza, who served as his vice mayor. Atienza was known for his campaign (and city slogan) 'Buhayin ang Maynila' (Revive Manila), which saw the establishment of several parks and the repair and rehabilitation of the city's deteriorating facilities. He was the city's mayor for 3 terms (9 years) before being termed out of office. Lim once again ran for mayor and defeated Atienza's son Ali in the 2007 city election and immediately reversed all of Atienza's projects[50] claiming Atienza's projects made little contribution to the improvements of the city. The relationship of both parties turned bitter, with the two pitting again during the 2010 city elections in which Lim won against Atienza. Lim was sued by councilor Dennis Alcoreza on 2008 over human rights,[51] charged with graft over the rehabilitation of public schools,[52] and was heavily criticized for his haphazard resolution of the Rizal Park hostage taking incident, one of the deadliest hostage crisis in the Philippines. Later on, Vice Mayor Isko Moreno and 28 city councilors filed another case against Lim in 2012, stating that Lim's statement in a meeting were 'life-threatening' to them.[53] The 119th commemoration of Rizal Day at the Rizal Park with the controversial Torre de Manila in the background. In 2012, DMCI Homes began constructing Torre de Manila, which became controversial for ruining the sight line of Rizal Park.[54] The tower is infamously known as 'Terror de Manila' or the 'national photobomber'.[55] The Torre de Manila controversy is regarded as one of the most sensationalized heritage issues of the country. In 2017, the National Historical Commission of the Philippines erected a 'comfort woman' statue along Roxas Boulevard, which made Japan expressed regret that such statue was erected in the city despite the healthy relationship between Japan and the Philippines.[56][57] In the 2013 elections, former President Joseph Estrada defeated Lim in the mayoral race. During his term, Estrada has paid more than ₱5 billion in city debts and increased the city's revenues from ₱6.2 billion in 2012 to ₱14.6 billion by 2016, resulting in increased infrastructure spending and the betterment of the welfare of the people of Manila. In 2015, the city became the most competitive city in the Philippines, making the city the best place for doing business and for living in. However, despite these achievements, Estrada only narrowly won over Lim in their electoral rematch in 2016.[58] Recently, the City Government is planning to revise existing curfew ordinance since the Supreme Court declared it unconstitutional on August 2017. Out of the three cities reviewed by the Supreme Court, namely: the City of Manila, Navotas and Quezon City; only the curfew ordinance of Quezon City was approved.'5, the city became the most competitive city in the Philippines, making the city the best place for doing business and for living in. However, despite these achievements, Estrada only narrowly won over Lim in their electoral rematch in 2016.[58] Recently, the City Government is planning to revise existing curfew ordinance since the Supreme Court declared it unconstitutional on August 2017. Out of the three cities reviewed by the Supreme Court, namely: the City of Manila, Navotas and Quezon City; only the curfew ordinance of Quezon City was approved."
]

var htest = [],
    btest = [];
var testPattern = ["or", "with", "only"];
let index = 0;
for(let j = 1; j <= natualTexts.length; j++){
    for(let i = 1; i <= testPattern.length; i++) {
        btest[index] = helper.speedTest(boyerMoore, testPattern[i-1], natualTexts[j-1]);
        htest[index] = helper.speedTest(horspool, testPattern[i-1], natualTexts[j-1]);
        index++;
    }
}

console.log(htest)
console.log(btest)

//生成Echart使用的数据
var xAxisArr = [];

for(let i = 0; i < (natualTexts.length * testPattern.length); i++){
    xAxisArr[i] = htest[i].pos; 
}
var horsYAxisarr = [],
    boyeYAxisarr = [];
    
for(let i = 0; i < (natualTexts.length * testPattern.length); i++){
    horsYAxisarr[i] = htest[i].time;
    boyeYAxisarr[i] = btest[i].time;
}



var legend = ['BoyerMoore','Horspool',]
var series = [
    {
        name:'BoyerMoore',
        type:'line',
        stack: '总量',
        data: boyeYAxisarr,
        color: 'red'
    },
    {
        name:'Horspool',
        type:'line',
        stack: '总量',
        data: horsYAxisarr,
        color: 'blue'
    }
]

draw("container", legend, series);


